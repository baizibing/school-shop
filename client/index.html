<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>vue+bootstrapè´­ç‰©è½¦</title>
 
    <link href="https://cdn.bootcss.com/twitter-bootstrap/4.0.0-alpha.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/vue/2.6.10/vue.min.js"></script> 
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>
<body>
    <div class="container" id="app" >
        <div class="panel panel-default" >
            <div class="panel-heading" style="background-color:cyan;text-align:center">Vue å­¦é™¢è´­ç‰©è½¦</div>
            <table class="table table-bordered text-center" v-if="arr.length != 0">
                <tr>
                    <th>ID</th>
                    <th>è®¢å•ç¼–å·</th>
                    <th>å•†å“åç§°</th>
                    <th>å•ä»·</th>
                    <th>æ•°é‡</th>
                    <th>å°è®¡</th>
                    <th>æ“ä½œ</th>
                </tr>

                <tr v-for="(item,index) in arr">
                    <td>{{index+1}}</td>
                    <td>{{item.id}}</td>
                    <td >{{item.name}}</td>
                    <td>{{item.price}}å…ƒ</td>

                    <td> 
                        <div class="input-group">
                                <span class="input-group-addon" @click="sub(index)">-</span>
                                <input type="text" v-model="item.amount" class="form-control"/>
                                <span class="input-group-addon" @click="add(index)">+</span>
                        </div>
                    </td>
                    <td>{{item.amount * item.price}}å…ƒ</td>
                    <td><button class="btn btn-danger" data-toggle="modal" data-target="#layer" @click="nowIndex=index">åˆ é™¤</button></td>
                </tr>
                <tr >
                    <td>æ€»è´­ä¹°ä»·æ ¼:</td>
                    <td colspan="5" >{{totalPrice}}å…ƒ</td>
                    <td><button class="btn btn-danger" data-toggle="modal" data-target="#layer" @click="nowIndex=-2">æ¸…ç©ºè´­ç‰©è½¦</button></td>
                </tr>
            </table>
            <div class="alert alert-warning" v-if="arr.length == 0" >æ‚¨çš„è´­ç‰©è½¦æ²¡æœ‰ä¸œè¥¿äº†ï¼Œæ‚¨å¼€å¿ƒå—</div>
        </div>

        <div role="dialog" class="modal fade bs-example-modal-sm" id="layer">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                        <h2>æ¸©é¦¨æç¤ºğŸ˜†</h2>
                        <h3 class="modal-title">æ‚¨ç¡®å®šè¦åˆ é™¤{{nowIndex < 0?"å…¨éƒ¨å•†å“":'å•†å“'+arr[nowIndex].name}}å—ï¼Ÿï¼Ÿ</h3>
                    </div>
                    <div class="modal-body text-right">
                        <button class="btn btn-primary btn-sm" data-dismiss="modal">å–æ¶ˆ</button>
                        <button class="btn btn-danger btn-sm" data-dismiss="modal" @click="removeM(nowIndex)">ç¡®è®¤</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script type="text/javascript">
     var vue_s = new Vue({

            el:"#app",
            data:{
                totalPrice : 0,
                nowIndex :-10,
                arr:[
                    {"id":"Fn001","name":"iOS","price":100,"amount":1},
                    {"id":"Fn002","name":"HTML","price":20,"amount":1},
                    {"id":"Fn003","name":"JS","price":30,"amount":1},
                    {"id":"Fn004","name":"Vue","price":80,"amount":1}
                ],message:"",
            },
            methods:{
                removeM:function(index_p){
                    if(index_p < 0){
                        // this.arr.splice(0,this.arr.length);
                        this.arr = [];
                    }else{
                        this.arr.splice(index_p,1);
                    }
                    this.clac();
                },
                add : function(index_p){
                    this.arr[index_p].amount++;
                    this.clac();
                },
                sub : function (index_p){
                    
                    if( this.arr[index_p].amount >= 1){
                        
                        this.arr[index_p].amount--;
                        this.clac();
                    }else{
                        if(confirm("æ‚¨ç¡®å®šåˆ é™¤è¿™ä»¶å•†å“å—?")){
                            this.arr.splice(index_p,1);
                        }
                    }
                },
                clac:function(){
                    this.totalPrice = 0;
                    var count = this.arr.length;
                    for(var i = 0; i < count;i++){
                       this.totalPrice += this.arr[i].price * this.arr[i].amount;
                    }
                }
            }
          
        });
        vue_s.clac();
    </script>
</body>
</html>